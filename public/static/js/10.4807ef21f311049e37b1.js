webpackJsonp([10],{1372:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PAGE_ROUTE=void 0;var u,i,c,f=(a(35),a(31)),s=n(f),d=(a(39),a(80)),p=n(d),m=(a(139),a(138)),h=n(m),y=(a(110),a(109)),b=n(y),g=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),v=a(0),E=n(v),_=a(63),O=a(137),j=a(1395),w=n(j),P=(t.PAGE_ROUTE="/materials/+edit/:id",u=(0,O.ajax)(),i=b.default.create(),u(c=i(c=function(e){function t(){var e,a,n,o;r(this,t);for(var u=arguments.length,i=Array(u),c=0;c<u;c++)i[c]=arguments[c];return a=n=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={loading:!1,isAdd:!0,data:{}},n.handleSubmit=function(e){e.preventDefault();var t=n.state,a=t.isAdd,r=t.loading,l=n.props,o=l.form,u=l.$ajax,i=l.router;r||o.validateFields(function(e,t){if(!e){var r=a?u.post:u.put,l=a?"添加成功":"修改成功";n.setState({loading:!0}),r("/materials",t).then(function(){h.default.success(l,1.5,function(){return i.push("/materials")})}).catch(function(){n.setState({loading:!1})})}})},n.handleReset=function(){n.props.form.resetFields()},o=a,l(n,o)}return o(t,e),g(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props.params.id,a=this.props.$ajax;":id"===t?this.setState({isAdd:!0}):(this.setState({isAdd:!1}),a.get("/materials/"+t).then(function(t){e.setState({data:t})}))}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.state,a=t.loading,n=t.isAdd,r=t.data,l=void 0===r?{}:r,o=n?"添加XXX":"修改XXX";return E.default.createElement(_.PageContent,null,E.default.createElement("h1",{style:{textAlign:"center"}},o),E.default.createElement(b.default,{onSubmit:this.handleSubmit},n?null:e("_id",{initialValue:l._id})(E.default.createElement(p.default,{type:"hidden"})),E.default.createElement(_.FormItemLayout,{label:"名称",labelSpaceCount:4,style:{maxWidth:300}},e("name",{initialValue:l.name,rules:[{required:!0,message:"请输入名称！"}]})(E.default.createElement(p.default,{placeholder:"请输入名称"}))),E.default.createElement(_.FormItemLayout,{label:"规格",labelSpaceCount:4,style:{maxWidth:300}},e("spec",{initialValue:l.spec,rules:[{required:!0,message:"请输入规格！"}]})(E.default.createElement(p.default,{placeholder:"请输入规格"}))),E.default.createElement(_.FormItemLayout,{label:"单位",labelSpaceCount:4,style:{maxWidth:300}},e("unit",{initialValue:l.unit,rules:[{required:!0,message:"请输入单位！"}]})(E.default.createElement(w.default,null))),E.default.createElement(_.FormItemLayout,{label:"单价",labelSpaceCount:4,style:{maxWidth:300}},e("unitPrice",{initialValue:l.unitPrice,rules:[{required:!0,message:"请输入单价！"}]})(E.default.createElement(p.default,{placeholder:"请输入单价"}))),E.default.createElement(_.FormItemLayout,{label:"备注",labelSpaceCount:4,style:{maxWidth:300}},e("remark",{initialValue:l.remark,rules:[{required:!0,message:"请输入备注！"}]})(E.default.createElement(p.default,{type:"textarea",placeholder:"请输入备注"}))),E.default.createElement("div",null,E.default.createElement(s.default,{style:{marginRight:8},loading:a,type:"primary",onClick:this.handleSubmit},"提交"),E.default.createElement(s.default,{type:"ghost",onClick:this.handleReset},"重置"))))}}]),t}(v.Component))||c)||c);t.default=P},1395:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.units=void 0;var u=(a(177),a(140)),i=n(u),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},f=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(0),d=n(s),p=i.default.Option,m=t.units=[{code:"m*m",name:"平米(㎡)"},{code:"kg",name:"千克(kg)"},{code:"g",name:"克(g)"},{code:"t",name:"顿(t)"},{code:"ge",name:"个"},{code:"box",name:"箱"},{code:"other",name:"其他"}],h=function(e){function t(){var e,a,n,o;r(this,t);for(var u=arguments.length,i=Array(u),c=0;c<u;c++)i[c]=arguments[c];return a=n=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={},o=a,l(n,o)}return o(t,e),f(t,[{key:"render",value:function(){return d.default.createElement(i.default,c({allowClear:!0,placeholder:"请选择单位"},this.props),m.map(function(e){return d.default.createElement(p,{key:e.code},e.name)}))}}]),t}(s.Component);t.default=h}});