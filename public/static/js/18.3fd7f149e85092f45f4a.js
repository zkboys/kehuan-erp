webpackJsonp([18],{1379:function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PAGE_ROUTE=void 0;var s,c,l=(r(140),r(139)),f=o(l),d=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),p=r(0),m=o(p),h=r(63),y=r(137),b=(t.PAGE_ROUTE="/system/domain",(s=(0,y.ajax)())(c=function(e){function t(){var e,r,o,i;a(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return r=o=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),o.state={total:0,dataSource:[]},o.queryItems=[[{type:"input",field:"name",label:"域名",labelSpaceCount:3,width:200,placeholder:"请输入域名"}]],o.toolItems=[{type:"primary",text:"添加",permission:"SYSTEM_ADD",onClick:function(){var e=[].concat(n(o.state.dataSource));if(e.find(function(e){return e.isNewAdd}))return f.default.error("每次只能新增一条记录！");var t={id:""+(new Date).getTime(),isNewAdd:!0,name:"域名",defaultShowEdit:!0};e.unshift(t),o.setState({dataSource:e})}}],o.columns=[{title:"域名",dataIndex:"name",key:"name",width:"60%",render:function(e,t){return m.default.createElement(h.EditableCell,{type:"input",field:"name",placeholder:"请输入域名",text:e,decorator:{rules:[{required:!0,message:"域名不能为空!"}]},defaultShowEdit:t.defaultShowEdit,onSubmit:function(e){t.isNewAdd?o.props.$ajax.post("/mock/users",e).then(function(){console.log("添加：",e),o.props.$ajax.get("/mock/users")}):o.props.$ajax.put("/mock/users",e).then(function(){console.log("修改：",e),o.props.$ajax.get("/mock/users")})}})}},{title:"操作",key:"operator",render:function(e,t){var r=[{label:"删除",permission:"",confirm:{title:"您确定要删除“"+t.name+"”？",onConfirm:function(){o.props.$ajax.del("/mock/users",t).then(function(e){o.props.$ajax.get("/mock/users"),console.log("删除",e)});var e=o.state.dataSource.filter(function(e){return e.id!==t.id});o.setState({dataSource:e})}}}];return m.default.createElement(h.Operator,{items:r,hasPermission:function(){return!0}})}}],o.handleSearch=function(e){return console.log(e),o.props.$ajax.get("/mock/users",e).then(function(e){o.setState({total:e.total,dataSource:e.list})})},i=r,u(o,i)}return i(t,e),d(t,[{key:"render",value:function(){var e=this.state,t=e.total,r=e.dataSource;return m.default.createElement(h.ListPage,{queryItems:this.queryItems,showSearchButton:!0,showResetButton:!1,toolItems:this.toolItems,columns:this.columns,onSearch:this.handleSearch,dataSource:r,total:t})}}]),t}(p.Component))||c);t.default=b}});